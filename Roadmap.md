## ✅ **Roadmap (по спринтам)**

**Продолжительность спринта: 1 неделя (MVP за 5 недель)**

---

### **Спринт 1: Базовая архитектура и аутентификация**

**Задачи:**

- [ ]  Настроить проект: фронтенд + бэкенд.
- [ ]  Поднять PostgreSQL.
- [ ]  Реализовать регистрацию и авторизацию (JWT).
- [ ]  VK OAuth.

**Промпт для разработки (Frontend):**

```
Создай форму регистрации и авторизации с React Hook Form, Tailwind и ShadcnUI.
Поддержка логин/пароль и кнопка "Войти через VK" (OAuth).
При успешном входе сохраняем JWT в localStorage и редиректим в ленту экскурсий.

```

**Промпт для разработки (Backend):**

```
Создай API для регистрации и логина на NestJS:
- POST /auth/register (email, password)
- POST /auth/login (email, password)
- GET /auth/vk (OAuth callback)
Реализуй JWT-токены, refresh tokens.

```

---

### **Спринт 2: Роли и управление пользователями**

**Задачи:**

- [ ]  Ввести роли: админ, экскурсовод, участник.
- [ ]  Админ может назначать роли.
- [ ]  Интерфейс для назначения ролей.

**Промпт:**

```
Добавь в модель User поле role (enum: ADMIN, GUIDE, USER).
Создай API:
- GET /users
- PATCH /users/:id/role
На фронтенде сделай панель администратора для управления ролями (таблица пользователей + селектор роли).

```

---

### **Спринт 3: Экскурсии (CRUD)**

**Задачи:**

- [ ]  Админ создает экскурсию (название, описание, дата, время, место, лимиты).
- [ ]  Экскурсовод видит только свои экскурсии.
- [ ]  Список экскурсий для участников.

**Промпт Backend:**

```
Создай модель Excursion:
- id, title, description, date, time, location, capacity, reserve, guideId
Реализуй API:
- POST /excursions (только админ)
- GET /excursions
- GET /excursions/:id
- PATCH /excursions/:id

```

**Промпт Frontend:**

```
Создай страницу "Создание экскурсии" для админа:
- Форма с полями: название, описание, дата/время, карта для выбора места, лимиты.
- Для карты используй Яндекс.Карты JS API, ставь маркер по клику.

```

---

### **Спринт 4: Запись участников**

**Задачи:**

- [ ]  Пользователь может записаться (с учетом лимита).
- [ ]  Выбор количества человек + бинокль.
- [ ]  Резерв при переполнении.

**Промпт Backend:**

```
Создай модель Booking:
- id, userId, excursionId, peopleCount, binocularNeeded, status (CONFIRMED, RESERVE)
API:
- POST /excursions/:id/book
- DELETE /bookings/:id
Проверяй capacity и добавляй в резерв при переполнении.

```

**Промпт Frontend:**

```
В карточке экскурсии сделай кнопку "Записаться" -> модалка:
- Поле "Количество человек" (макс. 3)
- Чекбокс "Нужен бинокль"
Показывай статус: подтверждено или резерв.

```

---

### **Спринт 5: UI для ролей + доп. функции**

**Задачи:**

- [ ]  Кабинет экскурсовода (список экскурсий + количество участников).
- [ ]  Кабинет администратора (статистика, управление экскурсиями).
- [ ]  Отображение карты на странице экскурсии.
- [ ]  Email-уведомление участнику.

**Промпт Frontend:**

```
Создай личный кабинет экскурсовода:
- Список экскурсий (название, дата, кол-во участников, кол-во резерв).
Добавь для админа страницу "Статистика":
- Таблица экскурсий с количеством записавшихся и резервистов.

```