# üìä –û—Ç—á–µ—Ç –ø–æ –°–ø—Ä–∏–Ω—Ç—É 6: Telegram-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è + –ø—Ä–æ—Å–º–æ—Ç—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

## üéØ –¶–µ–ª—å —Å–ø—Ä–∏–Ω—Ç–∞
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤ –∑–∞–ø–∏—Å–µ–π –¥–ª—è –∞–¥–º–∏–Ω–∞/—ç–∫—Å–∫—É—Ä—Å–æ–≤–æ–¥–∞.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. Backend (API)
- [x] **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `telegramId` –≤ –º–æ–¥–µ–ª—å User**
  - –ü–æ–ª–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - Nullable, —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏

- [x] **–°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å Telegram**
  - `TelegramService` - —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∞–∫–∫–∞—É–Ω—Ç–æ–≤
  - `TelegramController` - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å REST API
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–æ–≤ –ø—Ä–∏–≤—è–∑–∫–∏ —Å –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º (10 –º–∏–Ω—É—Ç)
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –ø–æ –∫–æ–¥—É

- [x] **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**
  - `POST /telegram/generate-code` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –ø—Ä–∏–≤—è–∑–∫–∏
  - `POST /telegram/link` - –ø—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ –∫–æ–¥—É
  - `GET /telegram/status` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏–≤—è–∑–∫–∏
  - `DELETE /telegram/unlink` - –æ—Ç–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞

- [x] **–≠–Ω–¥–ø–æ–∏–Ω—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤**
  - `GET /excursions/:id/bookings` - —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —ç–∫—Å–∫—É—Ä—Å–∏–∏
  - –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ –∏ —ç–∫—Å–∫—É—Ä—Å–æ–≤–æ–¥–æ–≤
  - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  - –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö (–≤–∫–ª—é—á–∞—è Telegram ID)

### 2. Frontend (UI)
- [x] **–•—É–∫ useTelegram**
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–≤—è–∑–∫–∏ Telegram
  - API –≤—ã–∑–æ–≤—ã –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- [x] **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç TelegramLink**
  - –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–≤—è–∑–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤–≤–æ–¥ –∫–æ–¥–∞ –ø—Ä–∏–≤—è–∑–∫–∏
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏–≤—è–∑–∫–∏
  - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–≤—è–∑–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞

- [x] **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–∏–≤—è–∑–∫–∏ Telegram
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
  - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- [x] **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç ExcursionParticipants**
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —ç–∫—Å–∫—É—Ä—Å–∏–∏
  - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  - –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–µ

- [x] **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—É —ç–∫—Å–∫—É—Ä—Å–∏–∏**
  - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ –∏ —ç–∫—Å–∫—É—Ä—Å–æ–≤–æ–¥–æ–≤
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞

### 3. Telegram Bot
- [x] **–°–æ–∑–¥–∞–Ω Telegram –±–æ—Ç**
  - Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å node-telegram-bot-api
  - –ö–æ–º–∞–Ω–¥—ã: /start, /help, /link, /status
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

- [x] **Docker –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
  - Dockerfile –¥–ª—è –±–æ—Ç–∞
  - –û–±–Ω–æ–≤–ª–µ–Ω docker-compose.yml
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

- [x] **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
  - README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
  - –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
**Backend:**
- –ù–µ—Ç –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ)

**Frontend:**
- –ù–µ—Ç –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ)

**Telegram Bot:**
- `node-telegram-bot-api` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API
- `axios` - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
- `dotenv` - –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
backend/src/telegram/
‚îú‚îÄ‚îÄ telegram.module.ts
‚îú‚îÄ‚îÄ telegram.service.ts
‚îî‚îÄ‚îÄ telegram.controller.ts

frontend/src/
‚îú‚îÄ‚îÄ hooks/useTelegram.ts
‚îú‚îÄ‚îÄ components/telegram/TelegramLink.tsx
‚îú‚îÄ‚îÄ components/excursions/ExcursionParticipants.tsx
‚îî‚îÄ‚îÄ pages/profile.tsx

telegram-bot/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ index.js
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ README.md
```

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞
1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —É @BotFather –≤ Telegram
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```env
   TELEGRAM_BOT_TOKEN=your_bot_token_here
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   cd telegram-bot
   npm install
   npm start
   ```

### 2. –ü—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (–ü—Ä–æ—Ñ–∏–ª—å)
3. –ù–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∏–≤—è–∑–∞—Ç—å Telegram"
4. –í–≤–æ–¥–∏—Ç —Å–≤–æ–π Telegram ID
5. –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–¥ –ø—Ä–∏–≤—è–∑–∫–∏
6. –í–≤–æ–¥–∏—Ç –∫–æ–¥ –≤ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/link <–∫–æ–¥>`

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
1. –ê–¥–º–∏–Ω –∏–ª–∏ —ç–∫—Å–∫—É—Ä—Å–æ–≤–æ–¥ –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —ç–∫—Å–∫—É—Ä—Å–∏–∏
2. –í–∏–¥–∏—Ç —Ä–∞–∑–¥–µ–ª "–£—á–∞—Å—Ç–Ω–∏–∫–∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏"
3. –ú–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–ø–∏—Å–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
4. –í–∏–¥–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–∂–¥–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–µ

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram
- ‚úÖ –ü—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —ç–∫—Å–∫—É—Ä—Å–∏–π
- ‚úÖ –£–¥–æ–±–Ω—ã–π UI –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è API
- ‚úÖ README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–°–ø—Ä–∏–Ω—Ç 6 –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ. –ì–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –∫ –°–ø—Ä–∏–Ω—Ç—É 7:
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —ç–∫—Å–∫—É—Ä—Å–∏–π
- –ü–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–µ–Ω—Ç–∞

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. Telegram –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∫–æ–¥–∞–º–∏ –ø—Ä–∏–≤—è–∑–∫–∏ (–Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ OAuth)
2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ —Å–ø—Ä–∏–Ω—Ç–µ 8)
3. –ë–æ—Ç —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–∫–µ–Ω–∞

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—Ç –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–µ –ø—Ä–æ–µ–∫—Ç–∞
